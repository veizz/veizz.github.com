import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,o,b as r}from"./app-DoMxC1ve.js";const a={},i=r('<h3 id="背景" tabindex="-1"><a class="header-anchor" href="#背景"><span>背景</span></a></h3><p>在输入方式上，人们总是在追寻一种更高效，门槛更低的方式，来降低用户使用产品的学习成本。语音输入也是一种尝试较多的方式，有些直接使用语音（如微信语音聊天），有些需要将语音转化为文字（语音识别）。接下来的内容是一次在pc浏览器上进行语音识别输入的一种尝试。</p><h3 id="实现" tabindex="-1"><a class="header-anchor" href="#实现"><span>实现</span></a></h3><p>调研阶段，chrome是支持语音识别的。它支持了一系列的接口，可以进行语音识别。参考<a href="http://www.cnblogs.com/jz1108/archive/2012/05/21/2511447.html" target="_blank" rel="noopener noreferrer">HTML5的Speech API相关标准的现状</a> 但是使用这些接口有一些困难，连不上服务器。此路不通。</p><p>那么，可以使用笨点儿的方法，先录音再上传到指定语音识别服务器，进行语音识别。这里使用的是百度语音开放平台(<a href="http://yuyin.baidu.com" target="_blank" rel="noopener noreferrer">yuyin.baidu.com</a>)的语音识别接口，支持8k,16k的单声道的wav文件，或者pcm。尝试了8k的识别效果，跟16k的差了好远。就使用了16k,单声道wav文件，上传到语音识别服务器。</p><p>关于录音，主要步骤就是使用<code>navigator.getUserMedia</code>来获取用户的输入设备，成功之后使用<code>webkitAudioContext</code>来创建音频实例。在录音结束之后，将录音的流导出为文件，上传即可。录音的可以参考这个<a href="http://codeartists.com/post/36746402258/how-to-record-audio-in-chrome-with-native-html5" target="_blank" rel="noopener noreferrer">recorder.js</a>，只要稍微做一下修改就可以应用。其中需要处理音频采样率，默认的采样率为44.1k,这里需要做一个转换，具体方法可以参考<a href="http://www.cnblogs.com/blqw/p/3782420.html" target="_blank" rel="noopener noreferrer">HTML5网页录音和压缩,边猜边做</a></p><p><em>ps：在浏览器扩展中，没有明确的方式去获取用户对录音的授权。可以在扩展的optionpage里面申请授权，之后在扩展的所有页面都有权限了。在较新的chrome浏览器里测过可以用。参考这里：<a href="http://stackoverflow.com/questions/13076272/how-do-i-give-webkitgetusermedia-permission-in-a-chrome-extension-popup-window" target="_blank" rel="noopener noreferrer">How do I give webkitGetUserMedia permission in a Chrome Extension popup window</a></em></p><h3 id="demo" tabindex="-1"><a class="header-anchor" href="#demo"><span>demo</span></a></h3><p>这里有一个chrome扩展的demo，实现了通过语音采样，生成wav文件上传到语音识别服务器的功能。其中做了一个比较简单的端点检测，通过音量的大小来确定输入的完成。 <a href="http://github.com/veizz/speech_io" target="_blank" rel="noopener noreferrer">http://github.com/veizz/speech_io</a></p><h3 id="一些思考" tabindex="-1"><a class="header-anchor" href="#一些思考"><span>一些思考</span></a></h3><ul><li>demo其实是用来参与公司举办的一届hackathon比赛，主要实现了语音在线识别，文字播报等功能。在后期还有想法加入了一些自然语音处理的功能，可以识别一些输入指令。如『打开百度首页』、『上淘宝买衣服』等功能。会打开指定网站，自动填写输入词，执行搜索。还可以做一些小功能，比如说语音输入『查询天气』、『买电影票』等常用功能，在popup的窗口里面打开等。</li><li>一切的想法都看起来很美好，但在大家都熟悉了打字输入的今天，还有多少人愿意使用语音识别做为输入方式？而对于不会打字的人，能否使用标准的普通话来进行语音识别的输入？</li><li>采样率的处理是通过js的文件操作来实现的。html5支持的fileapi强大如此，怪不得有人用js做视频解码器，不考虑性能的话，看起来很美好啊</li></ul><h3 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h3><p><a href="http://www.cnblogs.com/jz1108/archive/2012/05/21/2511447.html%5D" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/jz1108/archive/2012/05/21/2511447.html</a><a href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html" target="_blank" rel="noopener noreferrer">https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html</a><a href="http://codeartists.com/post/36746402258/how-to-record-audio-in-chrome-with-native-html5-apis" target="_blank" rel="noopener noreferrer">http://codeartists.com/post/36746402258/how-to-record-audio-in-chrome-with-native-html5-apis</a><a href="http://stackoverflow.com/questions/13076272/how-do-i-give-webkitgetusermedia-permission-in-a-chrome-extension-popup-window" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/questions/13076272/how-do-i-give-webkitgetusermedia-permission-in-a-chrome-extension-popup-window</a><a href="http://www.cnblogs.com/blqw/p/3782420.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/blqw/p/3782420.html</a><a href="http://ibillxia.github.io/blog/2013/05/22/audio-signal-processing-time-domain-Voice-Activity-Detection/" target="_blank" rel="noopener noreferrer">http://ibillxia.github.io/blog/2013/05/22/audio-signal-processing-time-domain-Voice-Activity-Detection/</a><a href="http://stackoverflow.com/questions/13333378/how-can-javascript-upload-a-blob" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/questions/13333378/how-can-javascript-upload-a-blob</a><a href="http://www.web-tinker.com/article/20498.html" target="_blank" rel="noopener noreferrer">http://www.web-tinker.com/article/20498.html</a></p>',13),n=[i];function h(l,c){return o(),t("div",null,n)}const m=e(a,[["render",h],["__file","2015-01-31-html5_record_and_speech_recognition.html.vue"]]),d=JSON.parse('{"path":"/posts/2015-01-31-html5_record_and_speech_recognition.html","title":"html5网页录音和语音识别","lang":"zh-CN","frontmatter":{"v_pageid":"c90da883e8a04c574100317c7a5daa41","author":"veizz","title":"html5网页录音和语音识别","date":"2015-01-31T21:03:18.000Z","categories":"html5","head":"使用userMedia, AudioContext接口实现录音，调整采样率等参数，将音频文件发送到语音识别服务器进行语音识别。部分特性需要浏览器支持。"},"headers":[{"level":3,"title":"背景","slug":"背景","link":"#背景","children":[]},{"level":3,"title":"实现","slug":"实现","link":"#实现","children":[]},{"level":3,"title":"demo","slug":"demo","link":"#demo","children":[]},{"level":3,"title":"一些思考","slug":"一些思考","link":"#一些思考","children":[]},{"level":3,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1422713986000,"updatedTime":1721272368000,"contributors":[{"name":"veizz","email":"veizzsmile@gmail.com","commits":3}]},"readingTime":{"minutes":3.53,"words":1060},"filePathRelative":"posts/2015-01-31-html5_record_and_speech_recognition.md","localizedDate":"2015年1月31日","excerpt":"<h3>背景</h3>\\n<p>在输入方式上，人们总是在追寻一种更高效，门槛更低的方式，来降低用户使用产品的学习成本。语音输入也是一种尝试较多的方式，有些直接使用语音（如微信语音聊天），有些需要将语音转化为文字（语音识别）。接下来的内容是一次在pc浏览器上进行语音识别输入的一种尝试。</p>\\n<h3>实现</h3>\\n<p>调研阶段，chrome是支持语音识别的。它支持了一系列的接口，可以进行语音识别。参考<a href=\\"http://www.cnblogs.com/jz1108/archive/2012/05/21/2511447.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">HTML5的Speech API相关标准的现状</a>\\n但是使用这些接口有一些困难，连不上服务器。此路不通。</p>"}');export{m as comp,d as data};
